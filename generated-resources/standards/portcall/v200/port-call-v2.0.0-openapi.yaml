---
openapi: "3.0.3"
info:
  title: "DCSA Port Call API"
  description: |
    # DCSA Port Call API

    This is the OpenAPI specification of the **DCSA Port Call** standard.

    This API allows the transfer of structured Port Call events from a publisher to a subscriber.

    Port Call events are used by port call service providers and consumers to exchange information about the service, including:
    - estimated, requested and planned service timestamps as part of [the "ERP" pattern defined by the IMO](https://wwwcdn.imo.org/localresources/en/OurWork/Facilitation/FAL%20related%20nonmandatory%20documents/FAL.5-Circ.52.pdf);
    - actual service timestamps;
    - container move counts (loads, discharges and restows).

    The event publisher implements the `GET /events` endpoint, which can be called by authorized API consumers to retrieve relevant available events.

    The event subscribers implement the `POST /events` endpoint, which can be called by event publishers to send relevant events as they become available.

    The registration of event subscribers with event publishers is out of scope.

    The authentication and authorization in both directions between event publishers and subscribers is out of scope.
  contact:
    name: "Digital Container Shipping Association (DCSA)"
    url: "https://dcsa.org"
    email: "info@dcsa.org"
  license:
    name: "Apache 2.0"
    url: "https://www.apache.org/licenses/LICENSE-2.0.html"
  version: "2.0.0"
tags:
- name: "Event Publisher Endpoints"
  description: "Endpoints implemented by the adopters who publish events"
- name: "Event Subscriber Endpoints"
  description: "Endpoints implemented by the adopters who receive events"
paths:
  /events:
    get:
      tags:
      - "Event Publisher Endpoints"
      summary: "Retrieves a list of events"
      description: |
        Retrieves the list of events matching the criteria provided as query parameters.

        If no events match the criteria provided as query parameters, the response should not be an HTTP 404 error message, but a regular HTTP 200 response with an empty array in the message body.

        The ordering of events in the response message is unspecified.

        The event publisher is expected to additionally filter the events based on the authorization and registration profile of the authenticated party calling this endpoint. Authorization, registration and any such additional filtering are out of scope in this standard.

        ## Supported filtering parameters

        Every event publisher **must** specify which of the query parameters below it supports in filtering events.

        When receiving requests containing an unsupported query parameter, an event publisher can choose to either ignore the query parameter (if possible) or to reject the request with an HTTP 400.

        ### Filtering by event timestamp

        Whenever the query parameters filter could retrieve large number of historical events, the request should also include at least the `eventTimestampMin` query parameter and could also include the `eventTimestampMax` query parameter.

        The event publisher can separately also decide to have default relative date ranges and only return events having a timestamp within those ranges.

        ## Pagination

        Response pagination uses a mechanism based on the `limit` and `cursor` query parameters and on the `Next-Page-Cursor` response header.

        ### Optional support

        Each event publisher can decide whether to support the pagination of results, or to only allow limiting the response size using filtering query parameters.

        If the event publisher does not provide pagination support, it can choose to either reject with an HTTP 400 any request containing the `limit` or `cursor` query parameters, or to handle the request normally while silently ignoring the pagination query parameters.

        ### Enabling pagination

        The event retriever can use the `limit` query parameter to specify a maximum number of events that should be included in the response.

        The event publisher can separately choose (and document on their copy of the published API specification) its own limit to the number of events that it would include in responses.

        The effective page size limit is the minimum between the `limit` query parameter (if specified) and the publisher's own maximum page size configuration setting.

        ### Retrieving results pages

        If based on filtering the response would include more events than this effective page size limit, the event publisher only adds events to the response up to this effective page size limit, setting in the response the `Next-Page-Cursor` to a value that it can accept as the value of the `cursor` query parameter in a subsequent request and use it to return the next page of results.

        The API client reads the value of the `Next-Page-Cursor` response header and sets it as the value of the `cursor` query parameter in its next request.

        The API client **must** keep alongside the `cursor` all the original query parameters from the request that retrieved the first page, in order to allow either a stateful or a stateless implementation of the pagination mechanism by the event publisher.

        The effect of changing any of the original query parameters in subsequent pagination requests is unspecified and may result in the rejection of the request by the event publisher with an HTTP 4xx response.

        The effect of attempting to use a cursor more than once (for example to "go back" to previous pages) is unspecified and may result in the rejection of the request by the event publisher with an HTTP 4xx response. (This is by design a backend-to-backend API, not intended for use directly from frontend applications and therefore not directly supporting a typical full set of web frontend pagination actions.)

        When responding with the last page of results, the event publisher no longer includes a `Next-Page-Cursor` response header. The last page of results may be empty, for example in the case of a stateless pagination implementation by the event publisher.
      operationId: "get-events"
      parameters:
      - name: "UNLocationCode"
        in: "query"
        description: "UN location code."
        schema:
          type: "string"
        example: "NLAMS"
      - name: "portVisitReference"
        in: "query"
        description: "Port visit reference."
        schema:
          type: "string"
        example: "NLAMS1234589"
      - name: "carrierServiceName"
        in: "query"
        description: "Carrier-specific service name."
        schema:
          type: "string"
        example: "Great Lion Service"
      - name: "carrierServiceCode"
        in: "query"
        description: "Carrier-specific service code."
        schema:
          type: "string"
        example: "FE1"
      - name: "universalServiceReference"
        in: "query"
        description: "Globally unique identifier of a liner service, assigned by carriers as specified by DCSA."
        schema:
          type: "string"
        example: "SR12345A"
      - name: "terminalCallReference"
        in: "query"
        description: "The terminal call reference for which to retrieve available events."
        schema:
          type: "string"
        example: "15063401"
      - name: "carrierImportVoyageNumber"
        in: "query"
        description: "The identifier of an import voyage. The carrier-specific identifier of the import Voyage."
        schema:
          type: "string"
        example: "1234N"
      - name: "universalImportVoyageReference"
        in: "query"
        description: "Unique identifier of the import voyage within the service, assigned by carriers as specified by DCSA."
        schema:
          type: "string"
        example: "2301W"
      - name: "carrierExportVoyageNumber"
        in: "query"
        description: "The identifier of an export voyage. The carrier-specific identifier of the export Voyage."
        schema:
          type: "string"
        example: "1234N"
      - name: "universalExportVoyageReference"
        in: "query"
        description: "Unique identifier of the export voyage within the service, assigned by carriers as specified by DCSA."
        schema:
          type: "string"
        example: "2301W"
      - name: "portCallServiceTypeCode"
        in: "query"
        description: "Port call service type."
        schema:
          type: "string"
        example: "BERTH"
      - name: "vesselIMONumber"
        in: "query"
        description: "Vessel IMO number."
        schema:
          type: "string"
        example: "12345678"
      - name: "vesselName"
        in: "query"
        description: "Vessel name."
        schema:
          type: "string"
        example: "King of the Seas"
      - name: "vesselMMSINumber"
        in: "query"
        description: "Vessel MMSI number."
        schema:
          type: "string"
        example: "278111222"
      - name: "portCallID"
        in: "query"
        description: "Unique identifier of a port call"
        schema:
          type: "string"
        example: "0342254a-5927-4856-b9c9-aa12e7c00563"
      - name: "terminalCallID"
        in: "query"
        description: "Unique identifier of a terminal call"
        schema:
          type: "string"
        example: "0342254a-5927-4856-b9c9-aa12e7c00563"
      - name: "portCallServiceID"
        in: "query"
        description: "Unique identifier of a port call service"
        schema:
          type: "string"
        example: "0342254a-5927-4856-b9c9-aa12e7c00563"
      - name: "timestampID"
        in: "query"
        description: "Unique identifier of a timestamp"
        schema:
          type: "string"
        example: "0342254a-5927-4856-b9c9-aa12e7c00563"
      - name: "classifierCode"
        in: "query"
        description: "Classifier code (EST / REQ / PLN / ACT)"
        schema:
          type: "string"
        example: "ACT"
      - name: "eventTimestampMin"
        in: "query"
        description: "Retrieve events with a timestamp at or after this date-time"
        schema:
          type: "string"
          format: "date-time"
        example: "2025-01-23T01:23:45Z"
      - name: "eventTimestampMax"
        in: "query"
        description: "Retrieve events with a timestamp at or before this date-time"
        schema:
          type: "string"
          format: "date-time"
        example: "2025-01-23T01:23:45Z"
      - name: "limit"
        in: "query"
        description: "Maximum number of events to include in each page of the response."
        schema:
          type: "integer"
          format: "int32"
        example: 10
      - name: "cursor"
        in: "query"
        description: "Set to the value of the `Next-Page-Cursor` header of the previous response to retrieve the next page."
        schema:
          type: "string"
        example: "ExampleNextPageCursor"
      - name: "API-Version"
        in: "header"
        description: "Every API request and response must contain the `API-Version` header, set to the full version of the implemented DCSA standard."
        required: false
        schema:
          type: "string"
        example: "2.0.0"
      - name: "Request-Sending-Party"
        in: "header"
        description: |
          When communicating through an optional system that acts as an application level Port Call communication proxy,
          forwarding API calls between Port Call service providers and Port Call service consumers,
          the API client sets this request header to identify itself to the Port Call proxy and to the API server
          as the original sending party of the API request.

          The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
          to the parties connecting through the Port Call proxy are out of scope.
        required: false
        schema:
          type: "string"
          example: "Carrier-123"
      - name: "Request-Receiving-Party"
        in: "header"
        description: |
          When communicating through an optional system that acts as an application level Port Call communication proxy,
          forwarding API calls between Port Call service providers and Port Call service consumers,
          the API client sets this request header to identify to the Port Call proxy the target receiving party of the API request.

          The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
          to the parties connecting through the Port Call proxy are out of scope.
        required: false
        schema:
          type: "string"
          example: "Terminal-456"
      responses:
        "200":
          description: "List of events matching the query parameters"
          headers:
            API-Version:
              $ref: "#/components/headers/API-Version"
            Next-Page-Cursor:
              $ref: "#/components/headers/Next-Page-Cursor"
            Response-Sending-Party:
              $ref: "#/components/headers/Response-Sending-Party"
            Response-Receiving-Party:
              $ref: "#/components/headers/Response-Receiving-Party"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetEventsResponse"
        default:
          description: "Error response"
          headers:
            API-Version:
              $ref: "#/components/headers/API-Version"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetEventsError"
    post:
      tags:
      - "Event Subscriber Endpoints"
      summary: "Sends a list of events"
      description: |
        Used by an event publisher to send events to a registered subscriber.

        The subscription mechanism and the management of subscriber profiles, including any filtering or page limits similar with the GET endpoint, are out of scope in this standard.
      operationId: "post-events"
      parameters:
      - name: "API-Version"
        in: "header"
        description: "Every API request and response must contain the `API-Version` header, set to the full version of the implemented DCSA standard."
        required: false
        schema:
          type: "string"
        example: "2.0.0"
      - name: "Request-Sending-Party"
        in: "header"
        description: |
          When communicating through an optional system that acts as an application level Port Call communication proxy,
          forwarding API calls between Port Call service providers and Port Call service consumers,
          the API client sets this request header to identify itself to the Port Call proxy and to the API server
          as the original sending party of the API request.

          The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
          to the parties connecting through the Port Call proxy are out of scope.
        required: false
        schema:
          type: "string"
        example: "Carrier-123"
      - name: "Request-Receiving-Party"
        in: "header"
        description: |
          When communicating through an optional system that acts as an application level Port Call communication proxy,
          forwarding API calls between Port Call service providers and Port Call service consumers,
          the API client sets this request header to identify to the Port Call proxy the target receiving party of the API request.

          The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
          to the parties connecting through the Port Call proxy are out of scope.
        required: false
        schema:
          type: "string"
        example: "Terminal-456"
      requestBody:
        description: "List of events"
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PostEventsRequest"
        required: true
      responses:
        "200":
          description: "Events response"
          headers:
            API-Version:
              $ref: "#/components/headers/API-Version"
            Response-Sending-Party:
              $ref: "#/components/headers/Response-Sending-Party"
            Response-Receiving-Party:
              $ref: "#/components/headers/Response-Receiving-Party"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PostEventsResponse"
        default:
          description: "Error response"
          headers:
            API-Version:
              $ref: "#/components/headers/API-Version"
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PostEventsError"
components:
  schemas:
    Address:
      type: "object"
      properties:
        street:
          maxLength: 70
          type: "string"
          description: "The name of the street."
          example: "Ruijggoordweg"
        streetNumber:
          maxLength: 50
          type: "string"
          description: "The number of the street."
          example: "100"
        floor:
          maxLength: 50
          type: "string"
          description: "The floor of the street number."
          example: "N/A"
        postCode:
          maxLength: 10
          type: "string"
          description: "The post code of the address."
          example: "1047 HM"
        POBox:
          maxLength: 20
          type: "string"
          description: "A numbered box at a post office where a person or business can have mail or parcels delivered."
          example: "123"
        city:
          maxLength: 35
          type: "string"
          description: "The name of the city."
          example: "Amsterdam"
        stateRegion:
          maxLength: 65
          type: "string"
          description: "The name of the state/region."
          example: "North Holland"
        countryCode:
          maxLength: 2
          type: "string"
          description: "The 2 characters for the country code using [ISO 3166-1 alpha-2](https://www.iso.org/obp/ui/#iso:pub:PUB500001:en)"
          example: "NL"
      description: "An object for storing address-related information."
    ContainerCountBySize:
      type: "object"
      properties:
        totalUnits:
          type: "integer"
          description: |
            The total number of containers (relevant only if specific numbers for each container size are not provided).
          format: "int32"
          example: 123
        size20Units:
          type: "integer"
          description: "The number of 20-foot containers."
          format: "int32"
          example: 123
        size40Units:
          type: "integer"
          description: "The number of 40-foot containers."
          format: "int32"
          example: 123
        size45Units:
          type: "integer"
          description: "The number of 45-foot containers."
          format: "int32"
          example: 123
      description: |
        Number of containers by size (20-foot, 40-foot, 45-foot) or in total.
    ContainerCountByTypeAndSize:
      type: "object"
      properties:
        totalUnits:
          description: |
            The total number of containers (relevant only if specific numbers for each container type are not provided).
          allOf:
          - $ref: "#/components/schemas/ContainerCountBySize"
        ladenUnits:
          description: "The number of laden containers."
          allOf:
          - $ref: "#/components/schemas/ContainerCountBySize"
        emptyUnits:
          description: "The number of empty containers."
          allOf:
          - $ref: "#/components/schemas/ContainerCountBySize"
        pluggedReeferUnits:
          description: "The number of plugged reefer containers."
          allOf:
          - $ref: "#/components/schemas/ContainerCountBySize"
        outOfGaugeUnits:
          description: "The number of out-of-gauge containers."
          allOf:
          - $ref: "#/components/schemas/ContainerCountBySize"
      description: |
        Number of containers by type (laden, empty, plugged reefer, out-of-gauge) or in total,
        further categorized by size (20-foot, 40-foot, 45-foot) or in total.
    Event:
      type: "object"
      properties:
        eventID:
          type: "string"
          description: "Universal unique identifier of the event"
          format: "uuid"
          example: "3910eb91-8791-4699-8029-8bba8cedb6f5"
        replyToEventID:
          type: "string"
          description: |
            ID of an earlier event to which this event is a reply.

            Used when sending a timestamp as a reply to another timestamp as part of
            [the "ERP" pattern defined by the IMO](https://wwwcdn.imo.org/localresources/en/OurWork/Facilitation/FAL%20related%20nonmandatory%20documents/FAL.5-Circ.52.pdf).
          format: "uuid"
          example: "3910eb91-8791-4699-8029-8bba8cedb6f5"
        eventUpdatedDateTime:
          maxLength: 30
          type: "string"
          description: "The date and time when the technical event was last updated."
          format: "date-time"
          example: "2025-01-23T01:23:45Z"
        isFYI:
          type: "boolean"
          description: |
            Flag indicating that this event is primarily meant for another party - but is sent as a FYI (for your information).
          example: false
        portCall:
          description: "Port call information"
          allOf:
          - $ref: "#/components/schemas/PortCall"
        terminalCall:
          description: "Terminal call information"
          allOf:
          - $ref: "#/components/schemas/TerminalCall"
        portCallService:
          description: "Port call service information"
          allOf:
          - $ref: "#/components/schemas/PortCallService"
        vessel:
          description: "Vessel information relevant for a port call service"
          allOf:
          - $ref: "#/components/schemas/Vessel"
        timestamp:
          description: |
            Timestamp and associated metadata of a port call service,
            exchanged between the service provider and service consumer as part of
            [the "ERP" pattern defined by the IMO](https://wwwcdn.imo.org/localresources/en/OurWork/Facilitation/FAL%20related%20nonmandatory%20documents/FAL.5-Circ.52.pdf).
          allOf:
          - $ref: "#/components/schemas/Timestamp"
        movesForecasts:
          type: "array"
          description: "The moves forecasts of a port call service with `portCallServiceTypeCode='MOVES'`"
          items:
            $ref: "#/components/schemas/MovesForecast"
      description: |
        Generic event used to exchange timestamps, move forecasts and related port call service information
        between service providers and service consumers.
    Facility:
      type: "object"
      properties:
        facilityCode:
          maxLength: 6
          type: "string"
          description: |
            Code identifying a specific facility, as defined by the `facilityCodeListProvider`.
          example: "ADT"
        facilityCodeListProvider:
          maxLength: 10
          type: "string"
          description: |
            Code list provider (each with its relevant code list) defining the `facilityCode`:
            - `SMDG` (using [SMDG Terminal Code List](https://smdg.org/documents/smdg-code-lists/smdg-terminal-code-list/))
            - `BIC` (using [BIC Facility Codes](https://www.bic-code.org/facility-codes/))
          example: "SMDG"
      description: |
        Facility identified by a code as defined by a code list provider.
    FeedbackElement:
      type: "object"
      properties:
        severity:
          maxLength: 50
          type: "string"
          description: |-
            Code denoting the severity of a `FeedbackElement`

            - `ERROR` - Error that fully or partially prevents the correct processing of the request
            - `WARN` - Warning about the request being processed in a potentially unexpected way
            - `INFO` - Informational message about how the request is processed
          example: "ERROR"
        message:
          maxLength: 5000
          type: "string"
          description: |
            Human readable feedback message that can be programmatically relayed to a user of the event publishing organization
          example: "The facility SMDG code does not match the location UN/LOCODE"
        propertyPath:
          maxLength: 1000
          type: "string"
          description: |
            [JSONPath](https://github.com/json-path/JsonPath) within the request message of the specific property
            about which the feedback is provided (if applicable)
          example: "$.events[2].location"
      description: |
        An individual piece of feedback (potentially out of several) providing information on how an API request is processed
    GeoCoordinate:
      type: "object"
      properties:
        latitude:
          maxLength: 20
          type: "string"
          description: "Latitude expressed as decimal degrees using the ISO 6709 data interchange numeric format."
          example: "33.629152"
        longitude:
          maxLength: 20
          type: "string"
          description: "Longitude expressed as decimal degrees using the ISO 6709 data interchange numeric format."
          example: "-118.587187"
      description: "An object used to express a location using its geographic coordinates."
    GetEventsError:
      type: "object"
      properties:
        feedbackElements:
          type: "array"
          description: |
            Feedback elements indicating why the request could not be processed.

            At least one feedback element of severity `ERROR` is expected.
            Lower severity feedback elements may also be included.
          items:
            $ref: "#/components/schemas/FeedbackElement"
      description: |
        Error API response to a `GET Events` request
    GetEventsResponse:
      type: "object"
      properties:
        events:
          type: "array"
          description: |
            The list of events matching the filter specified by the request query parameters
          items:
            $ref: "#/components/schemas/Event"
        feedbackElements:
          type: "array"
          description: |
            Optional list of feedback elements indicating how the request was processed
          items:
            $ref: "#/components/schemas/FeedbackElement"
      description: |
        API response to a `GET Events` request
    Location:
      type: "object"
      properties:
        locationName:
          maxLength: 100
          type: "string"
          description: "The name of the location."
          example: "Port of Amsterdam"
        facilityTypeCode:
          maxLength: 10
          type: "string"
          description: |-
            Code identifying a specific type of facility

            - `BORD` - Border
            - `CLOC` - Customer location
            - `COFS` - Container freight station
            - `OFFD` - Off-dock storage
            - `DEPO` - Depot
            - `INTE` - Inland terminal
            - `POTE` - Port terminal
            - `RAMP` - Ramp
            - `WAYP` - Waypoint
          example: "RAMP"
        address:
          description: "Location address"
          allOf:
          - $ref: "#/components/schemas/Address"
        UNLocationCode:
          maxLength: 5
          type: "string"
          description: |
            The UN Location code specifying where the place is located. The pattern used must be

            - 2 characters for the country code using [ISO 3166-1 alpha-2](https://www.iso.org/obp/ui/#iso:pub:PUB500001:en)
            - 3 characters to code a location within that country. Letters A-Z and numbers from 2-9 can be used

            More info can be found here: [UN/LOCODE](https://unece.org/trade/cefact/UNLOCODE-Download)
          example: "NLAMS"
        facility:
          description: |
            Facility identified by a code as defined by a code list provider.
          allOf:
          - $ref: "#/components/schemas/Facility"
        geoCoordinate:
          description: "An object used to express a location using its geographic coordinates."
          allOf:
          - $ref: "#/components/schemas/GeoCoordinate"
      description: "Location information"
    MovesForecast:
      type: "object"
      properties:
        carrierCode:
          maxLength: 4
          type: "string"
          description: |
            SMDG or SCAC code of the carrier for which the moves forecast is provided.

            If left unspecified, this is the aggregated moves forecast is for all the VSA partner carriers on the vessel
            for which a dedicated moves forecast was not provided.
          example: "MAEU"
        carrierCodeListProvider:
          maxLength: 5
          type: "string"
          description: |
            The code list provider defining the `carrierCode`:
            - `SMDG` (Ship Message Design Group)
            - `NMFTA` (National Motor Freight Traffic Association)
          example: "SMDG"
        restowUnits:
          description: "The number of container to restow."
          allOf:
          - $ref: "#/components/schemas/ContainerCountBySize"
        loadUnits:
          description: "The number of container to load."
          allOf:
          - $ref: "#/components/schemas/ContainerCountByTypeAndSize"
        dischargeUnits:
          description: "The number of container to discharge."
          allOf:
          - $ref: "#/components/schemas/ContainerCountByTypeAndSize"
      description: |
        Forecasted units of containers to move for loading and discharging, empty or laden,
        covering various types such as Dry, reefer, Out-of-Gauge (OOG), and units of containers to restow at a terminal.
        These can be detailed at varying levels of granularity.

        The moves forecast of the VSA partner carriers on the vessel can be specified using:
        - one optional `MovesForecast` object (with a specified `carrierCode`) for each VSA partner carrier on the vessel,
        representing the moves forecast for that specific carrier;
        - one optional `MovesForecast` object (without a `carrierCode`) representing the aggregated moves forecast
        of all the VSA partner carriers on the vessel for which a dedicated moves forecast was not provided.
    PortCall:
      type: "object"
      properties:
        portCallID:
          type: "string"
          description: "Universal unique identifier of the port call"
          format: "uuid"
          example: "3910eb91-8791-4699-8029-8bba8cedb6f5"
        portVisitReference:
          maxLength: 50
          type: "string"
          description: |
            The unique reference that can be used to link different terminal calls to the same port visit.
            The reference is provided by the port to uniquely identify a port call.
          example: "NLAMS1234589"
        UNLocationCode:
          maxLength: 5
          type: "string"
          description: |
            The UN Location code specifying where the place is located. The pattern used must be

            - 2 characters for the country code using [ISO 3166-1 alpha-2](https://www.iso.org/obp/ui/#iso:pub:PUB500001:en)
            - 3 characters to code a location within that country. Letters A-Z and numbers from 2-9 can be used

            More info can be found here: [UN/LOCODE](https://unece.org/trade/cefact/UNLOCODE-Download)
          example: "NLAMS"
        isOmitted:
          type: "boolean"
          description: "Flag indicating whether the port call is omitted by the carrier."
          example: false
      description: "Port call information"
    PortCallService:
      type: "object"
      properties:
        portCallID:
          type: "string"
          description: "Universal unique identifier of the port call service"
          format: "uuid"
          example: "3910eb91-8791-4699-8029-8bba8cedb6f5"
        portCallServiceTypeCode:
          maxLength: 50
          type: "string"
          description: |
            The type of the port call service, with the value from one of the service lists below.

            These port call services are negotiable through an "ERP" pattern including an "A":
            - `BERTH` (Berth)
            - `CARGO_OPERATIONS` (Cargo operations)
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)
            - `BUNKERING` (Bunkering)
            - `PILOT_BOARDING_PLACE` (Pilot Boarding Place)
            - `ANCHORAGE` (Anchorage)
            - `SLUDGE` (Sludge)

            These port call services only an "A" timestamp without an "ERP" pattern:
            - `SEA_PASSAGE` (Sea Passage)
            - `ALL_FAST` (All Fast)
            - `GANGWAY_DOWN_AND_SECURE` (Gangway down and secure)
            - `VESSEL_READY_FOR_CARGO_OPERATIONS` (Vessel Ready for cargo operations)
            - `VESSEL_READY_TO_SAIL` (Vessel Ready to sail)
            - `DISCHARGE_CARGO_OPERATIONS` (Discharge cargo operations)
            - `LOADING_CARGO_OPERATIONS` (Loading cargo operations)
            - `LASHING` (Lashing)
            - `SAFETY` (Safety)
            - `ANCHORAGE_OPERATIONS` (Anchorage Operations)
            - `SHORE_POWER` (ShorePower)

            This port call service has neither an "A" timestamp nor an "ERP" pattern:
            - `MOVES` (Moves)
          example: "BERTH"
        portCallServiceEventTypeCode:
          maxLength: 4
          type: "string"
          description: |
            The code to identify the type of event that is related to the port call service:
            - `STRT` (Started)
            - `CMPL` (Completed)
            - `ARRI` (Arrived)
            - `DEPA` (Departed)

            Services with these `portCallServiceTypeCode` values only have `portCallServiceEventTypeCode` the values `STRT` or `CMPL`:
            - `CARGO_OPERATIONS` (Cargo operations)
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)
            - `BUNKERING` (Bunkering)
            - `ANCHORAGE` (Anchorage)
            - `SLUDGE` (Sludge)
            - `SEA_PASSAGE` (Sea Passage)
            - `DISCHARGE_CARGO_OPERATIONS` (Discharge cargo operations)
            - `LOADING_CARGO_OPERATIONS` (Loading cargo operations)
            - `LASHING` (Lashing)
            - `ANCHORAGE_OPERATIONS` (Anchorage Operations)
            - `SHORE_POWER` (ShorePower)

            Services with these `portCallServiceTypeCode` values only have the `portCallServiceEventTypeCode` value `ARRI`:
            - `PILOT_BOARDING_PLACE` (Pilot Boarding Place)
            - `ALL_FAST` (All Fast)
            - `GANGWAY_DOWN_AND_SECURE` (Gangway down and secure)
            - `VESSEL_READY_FOR_CARGO_OPERATIONS` (Vessel Ready for cargo operations)
            - `VESSEL_READY_TO_SAIL` (Vessel Ready to sail)
            - `MOVES` (Moves)

            Services with  `portCallServiceTypeCode='SAFETY'` (Safety) only have the `portCallServiceEventTypeCode` value `DEPA`.

            Services with `portCallServiceTypeCode='BERTH'` (Berth) only have the `portCallServiceEventTypeCode` values `ARRI` or `DEPA`.
          example: "STRT"
        portCallPhaseTypeCode:
          maxLength: 4
          type: "string"
          description: |
            The general direction of the vessel during this port call service:
            - `INBD` (Inbound)
            - `ALGS` (Alongside)
            - `SHIF` (Shifting)
            - `OUTB` (Outbound)

            The direction `INBD` should be used with one of these `portCallServiceTypeCode` values:
            - `BERTH` (Berth)
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)
            - `PILOT_BOARDING_PLACE` (Pilot Boarding Place)
            - `SEA_PASSAGE` (Sea Passage)

            The direction `ALGS` should be used with one of these `portCallServiceTypeCode` values:
            - `BERTH` (Berth)
            - `BUNKERING` (Bunkering)
            - `CARGO_OPERATIONS` (Cargo operations)
            - `ALL_FAST` (All Fast)
            - `GANGWAY_DOWN_AND_SECURE` (Gangway down and secure)
            - `VESSEL_READY_FOR_CARGO_OPERATIONS` (Vessel Ready for cargo operations)
            - `VESSEL_READY_TO_SAIL` (Vessel Ready to sail)
            - `DISCHARGE_CARGO_OPERATIONS` (Discharge cargo operations)
            - `LOADING_CARGO_OPERATIONS` (Loading cargo operations)
            - `LASHING` (Lashing)
            - `SAFETY` (Safety)
            - `SHORE_POWER` (ShorePower)

            The direction `SHIF` should be used with one of these `portCallServiceTypeCode` values:
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)

            The direction `OUTB` should be used with one of these `portCallServiceTypeCode` values:
            - `BERTH` (Berth)
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)
            - `SEA_PASSAGE` (Sea Passage)

            The `portCallPhaseTypeCode` is not applicable for these `portCallServiceTypeCode` values:
            - `ANCHORAGE` (Anchorage)
            - `SLUDGE` (Sludge)
            - `ANCHORAGE_OPERATIONS` (Anchorage Operations)
            - `MOVES` (Moves)
          example: "ALGS"
        facilityTypeCode:
          maxLength: 4
          type: "string"
          description: |
            Code identifying a specific type of facility involved in a port call service:
            - `PBPL` (Pilot boarding place)
            - `BRTH` (Berth)
            - `ANCH` (Anchorage Location)

            The `PBPL` facility type is relevant for port call services with the following `portCallServiceTypeCode`:
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `PILOT_BOARDING_PLACE` (Pilot Boarding Place)

            The `BRTH` facility type is relevant for port call services with the following `portCallServiceTypeCode`:
            - `BERTH` (Berth)
            - `CARGO_OPERATIONS` (Cargo operations)
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)
            - `BUNKERING` (Bunkering)
            - `SLUDGE` (Sludge)
            - `ALL_FAST` (All Fast)
            - `GANGWAY_DOWN_AND_SECURE` (Gangway down and secure)
            - `VESSEL_READY_FOR_CARGO_OPERATIONS` (Vessel Ready for cargo operations)
            - `VESSEL_READY_TO_SAIL` (Vessel Ready to sail)
            - `DISCHARGE_CARGO_OPERATIONS` (Discharge cargo operations)
            - `LOADING_CARGO_OPERATIONS` (Loading cargo operations)
            - `LASHING` (Lashing)
            - `SAFETY` (Safety)
            - `ANCHORAGE_OPERATIONS` (Anchorage Operations)
            - `SHORE_POWER` (ShorePower)

            The `ANCH` facility type is relevant for port call services with the following `portCallServiceTypeCode`:
            - `ANCHORAGE` (Anchorage)
            - `ANCHORAGE_OPERATIONS` (Anchorage Operations)
          example: "BRTH"
        serviceLocation:
          description: "The location at which the port call service is provided"
          allOf:
          - $ref: "#/components/schemas/Location"
        isCanceled:
          type: "boolean"
          description: "Flag indicating that this port call service is canceled by the service provider."
          example: false
        isDeclined:
          type: "boolean"
          description: "Flag indicating that this port call service is declined by the service consumer."
          example: false
      description: "Port call service information"
    PostEventsError:
      type: "object"
      properties:
        feedbackElements:
          type: "array"
          description: |
            Feedback elements indicating why request could not be processed.

            At least one feedback element of severity `ERROR` is expected.
            Lower severity feedback elements may also be included.

            When sent in response to a request that contains an array of events,
            the order of the `feedbackElements` is not related to the list of request events.
            Instead, the relevant request event is indicated by the `propertyPath` of each `FeedbackElement`.
          items:
            $ref: "#/components/schemas/FeedbackElement"
      description: |
        Error API response to a `POST Events` request.

        If some of the events in the request were successfully processed,
        a regular `PostEventsResponse` is expected to be used instead,
        with `feedbackElements` indicating which events were not processed and why.
    PostEventsRequest:
      type: "object"
      properties:
        events:
          type: "array"
          description: "List of events."
          items:
            $ref: "#/components/schemas/Event"
      description: "API message containing a list of events."
    PostEventsResponse:
      type: "object"
      properties:
        feedbackElements:
          type: "array"
          description: |
            Optional list of feedback elements indicating how the request was processed.

            There can be zero, one or more feedback elements per event in the request.
            The order of `feedbackElements` is not related to the order of events in the request.
            Instead, the relevant request event is indicated by the `propertyPath` of each `FeedbackElement`.
          items:
            $ref: "#/components/schemas/FeedbackElement"
      description: |
        API response to a `POST Events` request
    ServiceCodeOrReference:
      type: "object"
      properties:
        carrierServiceCode:
          type: "string"
          description: "Carrier-specific identifier of a service."
          example: "FE1"
        universalServiceReference:
          maxLength: 8
          type: "string"
          description: |
            Globally unique identifier of a liner service, assigned by carriers as specified by DCSA.

            DCSA generates and distributes batches of Universal Service References (USRs)
            to member and non-member carriers upon request, for their own use or for their alliances and VSAs.

            A carrier can use each of its assigned USRs either in agreement with its partners for a service under a VSA or Alliance,
            or independently for one of its own non-VSA, non-Alliance services.

            Every Universal Service Reference is an 8-character string with the following format:
             * the prefix "SR"
             * 5 digits
             * 1 uppercase English letter (A-Z).
          example: "SR12345A"
      description: "Carrier service code and/or universal service reference"
    TerminalCall:
      type: "object"
      properties:
        terminalCallID:
          type: "string"
          description: "Universal unique identifier of the terminal call"
          format: "uuid"
          example: "3910eb91-8791-4699-8029-8bba8cedb6f5"
        terminalCallReference:
          maxLength: 100
          type: "string"
          description: |
            The unique reference of a terminal call, provided by the vessel operator.

            This corresponds to the property `transportCallReference` from the DCSA Operational Vessel Schedules (OVS) 3.0 standard.
          example: "15063401"
        sequenceNumber:
          type: "integer"
          description: |
            Sequential number assigned to each terminal call within a port call,
            indicating the order in which the terminal calls are scheduled to occur.
            This number helps differentiate multiple terminal visits in the same port call.
          format: "int32"
          example: 2
        carrierServiceName:
          maxLength: 50
          type: "string"
          description: "The carrier-specific name of the service for which the schedule details are published."
          example: "Great Lion Service"
        serviceCodeOrReference:
          description: "Carrier service code and/or universal service reference"
          allOf:
          - $ref: "#/components/schemas/ServiceCodeOrReference"
        exportVoyageNumberOrReference:
          description: "Export voyage number or reference"
          allOf:
          - $ref: "#/components/schemas/VoyageNumberOrReference"
        importVoyageNumberOrReference:
          description: "Import voyage number or reference"
          allOf:
          - $ref: "#/components/schemas/VoyageNumberOrReference"
        isOmitted:
          type: "boolean"
          description: "Flag indicating whether the terminal call is omitted by the carrier."
          example: false
      description: "Terminal call information"
    Timestamp:
      type: "object"
      properties:
        classifierCode:
          maxLength: 3
          type: "string"
          description: |
            Code identifying the type of this timestamp within the context of
            [the "ERP" pattern defined by the IMO](https://wwwcdn.imo.org/localresources/en/OurWork/Facilitation/FAL%20related%20nonmandatory%20documents/FAL.5-Circ.52.pdf):
            - `ACT` (Actual)
            - `EST` (Estimated)
            - `PLN` (Planned)
            - `REQ` (Requested)

            Timestamps of type `EST`, `PLN` and `ACT` are sent by the service provider to the service consumer.

            Timestamps of type `REQ` are sent by the service consumer to the service provider.

            Timestamps of type `ACT` are relevant in port call services of every type except for `MOVES`.

            Timestamps of type `EST`, `REQ` and `PLN` are relevant in port call services of these types:
            - `BERTH` (Berth)
            - `CARGO_OPERATIONS` (Cargo operations)
            - `PILOTAGE` (Pilotage)
            - `TOWAGE` (Towage)
            - `MOORING` (Mooring)
            - `BUNKERING` (Bunkering)
            - `PILOT_BOARDING_PLACE` (Pilot Boarding Place)
            - `ANCHORAGE` (Anchorage)
            - `SLUDGE` (Sludge)
          example: "EST"
        serviceDateTime:
          maxLength: 30
          type: "string"
          description: "The date and time when the service was provided or is expected to be provided."
          format: "date-time"
          example: "2025-01-23T01:23:45Z"
        delayReasonCodes:
          type: "array"
          description: "Codes identifying the reasons for a delay"
          items:
            maxLength: 3
            type: "string"
            description: |
              Code identifying the reason for a delay,
              [as defined by SMDG](https://smdg.org/documents/smdg-code-lists/delay-reason-and-port-call-activity/).
            example: "STR"
        remark:
          maxLength: 500
          type: "string"
          description: "Free text used to provide any relevant additional information."
          example: "Port closed due to strike"
      description: |
        Timestamp and associated metadata of a port call service,
        exchanged between the service provider and service consumer as part of
        [the "ERP" pattern defined by the IMO](https://wwwcdn.imo.org/localresources/en/OurWork/Facilitation/FAL%20related%20nonmandatory%20documents/FAL.5-Circ.52.pdf).
    Vessel:
      type: "object"
      properties:
        vesselIMONumber:
          maxLength: 8
          type: "string"
          description: |
            The unique reference for a registered vessel, which remains unchanged throughout the entire lifetime of the vessel.
            The reference is the International Maritime Organisation (IMO) number, also sometimes known as the Lloyd's register code.
          example: "9321483"
        vesselMMSINumber:
          maxLength: 9
          type: "string"
          description: |
            Maritime Mobile Service Identities (MMSIs) are nine-digit numbers used by maritime digital selective calling (DSC),
            automatic identification systems (AIS) and certain other equipment to uniquely identify a ship or a coast radio station.
          example: "278111222"
        vesselName:
          maxLength: 50
          type: "string"
          description: "Vessel name"
          example: "King of the Seas"
        vesselCallSign:
          maxLength: 10
          type: "string"
          description: |
            A unique alphanumeric identity that belongs to the vessel and is assigned by the International Telecommunication Union (ITU).
            It consists of a three-letter alphanumeric prefix that indicates nationality, followed by one to four characters
            to identify the individual vessel.
          example: "NCVV"
        vesselTypeCode:
          maxLength: 4
          type: "string"
          description: |
            Categorization of ocean-going vessels distinguished by the main cargo the vessel carries:
            - `GCGO` (General cargo)
            - `CONT` (Container)
            - `RORO` (RoRo)
            - `CARC` (Car carrier)
            - `PASS` (Passenger)
            - `FERY` (Ferry)
            - `BULK` (Bulk)
            - `TANK` (Tanker)
            - `LGTK` (Liquefied gas tanker)
            - `ASSI` (Assistance)
            - `PILO` (Pilot boat)
          example: "CONT"
        vesselPosition:
          description: "Current location of the vessel"
          allOf:
          - $ref: "#/components/schemas/Location"
        milesToDestinationPort:
          type: "number"
          description: |
            Remaining distance reported by the vessel to the berth in the next destination port, expressed in nautical miles.
          format: "double"
          example: 245.45
        vesselSizeUnit:
          maxLength: 3
          type: "string"
          description: |
            The unit of measure in which the vessel length and width are expressed:
            - `MTR` (Meter)
            - `FOT` (Foot)

            If values are specified in feet (`FOT`) then the decimal part means a fraction of a foot and **not** as a number of inches.
            E.g. 120.5 feet means 120 and a half foot (which would be 120'6").
          example: "MTR"
        lengthOverall:
          type: "number"
          description: |
            The maximum length of the vessel's hull measured parallel to the waterline ("length overall").
          format: "float"
          example: 245.45
        width:
          type: "number"
          description: |
            Overall width of the ship measured at the widest point of the nominal waterline.
          format: "float"
          example: 37.33
        draftUnit:
          maxLength: 3
          type: "string"
          description: |
            The unit of measure in which the draft values are expressed:
            - `MTR` (Meter)
            - `FOT` (Foot)

            If values are specified in feet (`FOT`) then the decimal part means a fraction of a foot and **not** as a number of inches.
            E.g. 120.5 feet means 120 and a half foot (which would be 120'6").
          example: "MTR"
        airDraft:
          type: "number"
          description: |
            The vertical distance from the surface of the water to the highest point of mast or aerial.
          format: "float"
          example: 55.0
        draft:
          type: "number"
          description: |
            The vertical distance between the waterline and the bottom of the hull (keel) of a ship.
            The depth to which a ship is immersed in water.
          format: "float"
          example: 12.5
        aftDraft:
          type: "number"
          description: |
            The vertical distance between the waterline and the bottom of the hull (keel) at the stern (after part) of the vessel.
            The depth to which the after part of the ship is immersed in water.
          format: "float"
          example: 37
        forwardDraft:
          type: "number"
          description: |
            The vertical distance between the waterline and the bottom of the hull (keel) at the bow (forward part) of the vessel.
            The depth to which the forward part of the ship is immersed in water.
          format: "float"
          example: 35
      description: "Vessel information relevant for a port call service"
    VoyageNumberOrReference:
      type: "object"
      properties:
        carrierVoyageNumber:
          type: "string"
          description: "Carrier-specific identifier of the voyage"
          example: "2103S"
        universalVoyageReference:
          maxLength: 5
          type: "string"
          description: |
            Unique identifier of the voyage within a service, assigned by carriers as specified by DCSA.

            Carriers assign a Universal Voyage Reference (UVR) to a voyage,
            either individually for non-VSA services or jointly for shared services under a VSA or Alliance.

            Every Universal Voyage Reference is a 5-character string with the following format:
             * the last 2 digits of the year
             * 2 alphanumeric characters for the sequence number of the voyage
             * 1 character for the initial of the direction/haul (`N`orth, `E`ast, `W`est, `S`outh or `R`oundtrip).
          example: "2301W"
      description: "Carrier voyage number and/or universal voyage reference"
  headers:
    API-Version:
      description: "Every API request and response must contain the `API-Version` header, set to the full version of the implemented DCSA standard."
      schema:
        type: "string"
        example: "2.0.0"
    Next-Page-Cursor:
      description: "A cursor value pointing to the next page of results in a paginated GET response."
      schema:
        type: "string"
        example: "ExampleNextPageCursor"
    Request-Sending-Party:
      description: |
        When communicating through an optional system that acts as an application level Port Call communication proxy,
        forwarding API calls between Port Call service providers and Port Call service consumers,
        the API client sets this request header to identify itself to the Port Call proxy and to the API server
        as the original sending party of the API request.

        The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
        to the parties connecting through the Port Call proxy are out of scope.
      schema:
        type: "string"
        example: "Carrier-123"
    Request-Receiving-Party:
      description: |
        When communicating through an optional system that acts as an application level Port Call communication proxy,
        forwarding API calls between Port Call service providers and Port Call service consumers,
        the API client sets this request header to identify to the Port Call proxy the target receiving party of the API request.

        The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
        to the parties connecting through the Port Call proxy are out of scope.
      schema:
        type: "string"
        example: "Terminal-456"
    Response-Sending-Party:
      description: |
        When communicating through an optional system that acts as an application level Port Call communication proxy,
        forwarding API calls between Port Call service providers and Port Call service consumers,
        the API server sets this response header to identify itself to the Port Call proxy and to the API client
        as the original sending party of the API response.

        The value of this response header must be the same as the value of the request header `Request-Receiving-Party`.

        The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
        to the parties connecting through the Port Call proxy are out of scope.
      schema:
        type: "string"
        example: "Terminal-456"
    Response-Receiving-Party:
      description: |
        When communicating through an optional system that acts as an application level Port Call communication proxy,
        forwarding API calls between Port Call service providers and Port Call service consumers,
        the API server sets this response header to identify to the Port Call proxy the target receiving party of the API response.

        The value of this response header must be the same as the value of the request header `Request-Sending-Party`.

        The assignment of party identifiers by the Port Call proxy and the distribution of identifiers
        to the parties connecting through the Port Call proxy are out of scope.
      schema:
        type: "string"
        example: "Carrier-123"
